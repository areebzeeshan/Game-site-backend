"use strict";(self.webpackChunknew_client=self.webpackChunknew_client||[]).push([[230],{69817:function(e,r,t){t.d(r,{BX:function(){return l},N6:function(){return d},Xq:function(){return i},q7:function(){return u}});var s=t(74165),n=t(15861),a=t(74569),c=t.n(a),o=t(48145),i=function(e,r,t){return function(){var a=(0,n.Z)((0,s.Z)().mark((function n(a,i){var d,u;return(0,s.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,c().get("".concat(o.b,"/products/").concat(e));case 2:d=s.sent,u=d.data,a({type:"cart_add_item",payload:{product:u._id,name:u.name,price:u.price,countInStock:u.countInStock,images:u.images,qty:r,userId:t}}),localStorage.setItem("cartItems",JSON.stringify(i().cart.cartItems));case 6:case"end":return s.stop()}}),n)})));return function(e,r){return a.apply(this,arguments)}}()},d=function(e){return function(){var r=(0,n.Z)((0,s.Z)().mark((function r(t,n){return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t({type:"cart_remove_item",payload:e}),localStorage.removeItem("cartItems"),localStorage.removeItem("shippingAddress"),localStorage.removeItem("paymentMethod"),localStorage.removeItem("phoneNumber");case 5:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},u=function(e){return function(){var r=(0,n.Z)((0,s.Z)().mark((function r(t){return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t({type:"cart_shipping_address",payload:e}),localStorage.setItem("shippingAddress",JSON.stringify(e));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},l=function(e){return function(){var r=(0,n.Z)((0,s.Z)().mark((function r(t){return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t({type:"cart_payment_method",payload:e}),localStorage.setItem("paymentMethod",JSON.stringify(e));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}},41713:function(e,r,t){t.d(r,{Du:function(){return p},LV:function(){return i},Nc:function(){return u},TG:function(){return l},h:function(){return x},kA:function(){return h},or:function(){return m},s$:function(){return d}});var s=t(74165),n=t(15861),a=t(74569),c=t.n(a),o=t(48145),i=(t(69817),function(e){return function(){var r=(0,n.Z)((0,s.Z)().mark((function r(t,n){var a,i,d,u,l;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t({type:"order_create_request"}),a=n(),i=a.user,d={headers:{"Content-Type":"Application/json",authtoken:"".concat(i.token)}},r.next=6,c().post("".concat(o.b,"/orders/"),e,d);case 6:u=r.sent,l=u.data,t({type:"order_create_success",payload:l}),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),t({type:"order_create_fail",payload:r.t0.response&&r.t0.response.data.message?r.t0.response.data.message:r.t0.message});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e,t){return r.apply(this,arguments)}}()}),d=function(e){return function(){var r=(0,n.Z)((0,s.Z)().mark((function r(t,n){var a,i,d,u,l;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t({type:"order_details_request"}),a=n(),i=a.user,d={headers:{authtoken:"".concat(i.token)}},r.next=6,c().get("".concat(o.b,"/orders/").concat(e),d);case 6:u=r.sent,l=u.data,t({type:"order_details_success",payload:l}),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),t({type:"order_details_fail",payload:r.t0.response&&r.t0.response.data.message?r.t0.response.data.message:r.t0.message});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e,t){return r.apply(this,arguments)}}()},u=function(e){return function(){var r=(0,n.Z)((0,s.Z)().mark((function r(t,n){var a,i,d,u;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,t({type:"order_pay_request"}),a=n(),i=a.user,d={headers:{"Content-Type":"application/json",authtoken:i.token?"".concat(i.token):""}},!i.token){r.next=10;break}return r.next=7,c().put("".concat(o.b,"/orders/").concat(e,"/confirm"),{},d);case 7:u=r.sent,u.data,t({type:"order_pay_success"});case 10:r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),t({type:"order_pay_fail",payload:r.t0.response&&r.t0.response.data.message?r.t0.response.data.message:r.t0.message});case 15:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(e,t){return r.apply(this,arguments)}}()},l=function(){return function(){var e=(0,n.Z)((0,s.Z)().mark((function e(r,t){var n,a,i,d,u;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:"my_order_request"}),!1,n=t(),a=n.user,i={headers:{authtoken:a.token?"".concat(a.token):""}},e.next=7,c().post("".concat(o.b,"/orders/myorders"),{email:a.email},i);case 7:d=e.sent,u=d.data,r({type:"my_order_success",payload:u}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),r({type:"my_order_fail",payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(r,t){return e.apply(this,arguments)}}()},p=function(){return function(){var e=(0,n.Z)((0,s.Z)().mark((function e(r,t){var n,a,i,d,u;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:"order_list_request"}),!1,n=t(),a=n.user,i={headers:{authtoken:a.token?"".concat(a.token):""}},e.next=7,c().get("".concat(o.b,"/orders/"),i);case 7:d=e.sent,u=d.data,r({type:"order_list_success",payload:u}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),r({type:"order_list_fail",payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(r,t){return e.apply(this,arguments)}}()},m=function(e){return function(){var r=(0,n.Z)((0,s.Z)().mark((function r(t,n){var a,i,d,u,l;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t({type:"order_deliver_request"}),!1,a=n(),i=a.user,d={headers:{authtoken:i.token?"".concat(i.token):""}},r.next=7,c().put("".concat(o.b,"/orders/").concat(e,"/deliver/pay"),{},d);case 7:u=r.sent,l=u.data,t({type:"order_deliver_success",payload:l}),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),t({type:"order_deliver_fail",payload:r.t0.response&&r.t0.response.data.message?r.t0.response.data.message:r.t0.message});case 15:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(e,t){return r.apply(this,arguments)}}()},x=function(e){return function(){var r=(0,n.Z)((0,s.Z)().mark((function r(t,n){var a,i,d,u;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t({type:"order_deliver_delete_request"}),!1,a=n(),i=a.user,d={headers:{authtoken:i.token?"".concat(i.token):""}},r.next=7,c().delete("".concat(o.b,"/orders/").concat(e),d);case 7:u=r.sent,u.data,t({type:"order_deliver_delete_success"}),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),t({type:"order_deliver_delete_fail",payload:r.t0.response&&r.t0.response.data.message?r.t0.response.data.message:r.t0.message});case 15:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(e,t){return r.apply(this,arguments)}}()},h=function(e){return function(){var r=(0,n.Z)((0,s.Z)().mark((function r(t,n){var a,i,d,u;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t({type:"myorder_delete_request"}),!1,a=n(),i=a.user,d={headers:{authtoken:i.token?"".concat(i.token):""}},r.next=7,c().delete("".concat(o.b,"/orders/myorders/").concat(e),d);case 7:u=r.sent,u.data,t({type:"myorder_delete_success"}),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),t({type:"myorder_delete_fail",payload:r.t0.response&&r.t0.response.data.message?r.t0.response.data.message:r.t0.message});case 15:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(e,t){return r.apply(this,arguments)}}()}},94899:function(e,r,t){t(72791);var s=t(91523),n=t(16856),a=t(39126),c=t(56355),o=t(3479),i=t(58617),d=t(80184);r.Z=function(){return(0,d.jsx)("header",{className:"text-gray-600 body-font py-10",children:(0,d.jsx)("div",{className:"container mx-auto flex flex-wrap p-5 flex-col md:flex-row items-center",children:(0,d.jsxs)("nav",{className:"md:mr-auto md:ml-4 md:py-1 md:pl-4 md:border-l md:border-gray-400\tflex flex-wrap items-center text-base justify-center",children:[(0,d.jsxs)(s.rU,{className:"mr-5 hover:text-gray-900 inline-flex items-center",to:"/admin/create",children:["Create Products",(0,d.jsx)(n.Doq,{className:"mx-1",color:"blue"})]}),(0,d.jsxs)(s.rU,{className:"mr-5 hover:text-gray-900 inline-flex items-center",to:"/admin/orders",children:["Orders",(0,d.jsx)(a.SoK,{className:"mx-1",color:"blue"})]}),(0,d.jsxs)(s.rU,{className:"mr-5 hover:text-gray-900 inline-flex items-center",to:"/admin/products",children:["Products",(0,d.jsx)(o.pCw,{className:"mx-1",color:"blue"})]}),(0,d.jsxs)(s.rU,{className:"mr-5 hover:text-gray-900 inline-flex items-center",to:"/admin/users",children:["Users",(0,d.jsx)(c.I$,{className:"mx-1",color:"blue"})]}),(0,d.jsxs)(s.rU,{className:"mr-5 hover:text-gray-900 inline-flex items-center",to:"/admin/suppliers",children:["Suppliers",(0,d.jsx)(c.ghb,{className:"mx-1",color:"blue"})]}),(0,d.jsxs)(s.rU,{className:"mr-5 hover:text-gray-900 inline-flex items-center",to:"/admin/reports",children:["Reports",(0,d.jsx)(i.rkW,{className:"mx-1",color:"blue"})]})]})})})}},73230:function(e,r,t){t.r(r);var s=t(91523),n=t(72791),a=t(16030),c=t(94899),o=t(41713),i=t(80184);r.default=function(e){var r=e.match,t=(e.history,r.params.id),d=(0,a.I0)(),u=(0,a.v9)((function(e){return e.orderDetails})),l=(0,a.v9)((function(e){return e.user})),p=u.order,m=u.loading,x=u.error,h=(0,a.v9)((function(e){return e.orderDelivered})),f=h.loading;h.success;m||(p.itemsPrice=p.orderItems.reduce((function(e,r){return e+r.price*r.qty}),0)),(0,n.useEffect)((function(){d((0,o.s$)(t)),d({type:"order_deliver_reset"})}),[d,t]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.Z,{}),l&&m&&(0,i.jsx)("p",{children:"loading..."}),x&&(0,i.jsxs)("p",{children:[" ",x," "]}),(0,i.jsx)("header",{"aria-label":"Page Header",className:"bg-gray-50",children:(0,i.jsx)("div",{className:"mx-auto max-w-screen-xl px-4 py-8 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"mt-8 pb-10 bg-blue-700 p-20 rounded-md",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-200 sm:text-3xl",children:"Order"}),(0,i.jsx)("p",{className:"mt-1.5 text-sm text-yellow-400",children:t}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)("h2",{className:"text-gray-200",children:"Shipping"}),(0,i.jsx)("hr",{className:"py-1"}),l.name&&(0,i.jsxs)("p",{className:"text-gray-200",children:[" ",(0,i.jsxs)("strong",{children:[" Name : ",p&&p.user.name," "]})]}),(0,i.jsxs)("p",{className:"text-gray-200",children:[" ",(0,i.jsx)("strong",{children:"Email :"})," ",(0,i.jsxs)("a",{href:"mailto:".concat(p&&p.user.email),children:[" ",p&&p.user.email," "]})]}),(0,i.jsxs)("p",{className:"text-gray-200",children:[" ",(0,i.jsx)("strong",{children:"User :"})," ",(0,i.jsxs)(s.rU,{to:"/admin/user/".concat(p&&p.user._id),children:[" ",p&&p.user._id," "]})]}),(0,i.jsxs)("p",{className:"text-gray-200",children:[(0,i.jsx)("strong",{children:" Address :"}),p&&p.shippingAddress.address,","," ",p&&p.shippingAddress.city,","," ",p&&p.shippingAddress.postalCode,",","  ",p&&p.shippingAddress.country]}),p&&p.isDelivered?(0,i.jsxs)("p",{className:"text-green-500",children:[" ",p&&p.deliveredAt," "]}):(0,i.jsx)("p",{className:"text-red-700",children:" Not Deliver Yet "}),(0,i.jsx)("br",{}),(0,i.jsx)("h2",{className:"text-gray-200",children:"payment method"}),(0,i.jsx)("hr",{className:"py-1"}),(0,i.jsxs)("p",{className:"text-gray-200",children:[(0,i.jsx)("strong",{children:" method : "}),p&&p.paymentMethod]}),p&&p.isPaid?(0,i.jsxs)("p",{className:"text-green-700",children:[" ",p&&p.paidAt," "]}):(0,i.jsx)("p",{className:"text-red-700",children:" Not Paid Yet "}),(0,i.jsx)("br",{}),(0,i.jsx)("h2",{className:"text-gray-200",children:"Order Items"}),(0,i.jsx)("hr",{className:"py-1"}),p&&0===p.orderItems.length?(0,i.jsx)("p",{children:"Cart is empty"}):(0,i.jsx)(i.Fragment,{children:p&&p.orderItems.map((function(e,r){return(0,i.jsxs)("p",{className:"text-gray-200",children:[(0,i.jsxs)("strong",{children:[" ",(0,i.jsxs)(s.rU,{to:"/product/".concat(e.product),children:[" ",e.name," "]})," "]}),e.qty," x PKR ",e.price," = PKR"," ",e.qty*e.price]},r)}))}),(0,i.jsx)("br",{}),(0,i.jsx)("h2",{className:"text-gray-200",children:"Order Items"}),(0,i.jsx)("hr",{className:"py-1"}),(0,i.jsxs)("p",{className:"text-gray-200",children:[(0,i.jsx)("strong",{children:" Items : "}),"PKR ",p&&p.itemsPrice]}),(0,i.jsxs)("p",{className:"text-gray-200",children:[(0,i.jsx)("strong",{children:" Shipping : "}),"PKR ",p&&p.shippingPrice]}),(0,i.jsxs)("p",{className:"text-gray-200",children:[(0,i.jsx)("strong",{children:" TAX Price : "}),"PKR ",p&&p.taxPrice]}),(0,i.jsxs)("p",{className:"text-gray-200",children:[(0,i.jsx)("strong",{children:" Total : "}),"PKR ",p&&p.totalPrice]}),l&&l.isAdmin&&(0,i.jsx)("button",{disabled:p&&p.isDelivered&&!0,className:"flex mx-auto text-white   bg-gray-500 border-0 py-2 px-8 focus:outline-none hover:bg-gray-600 rounded text-lg",onClick:function(){d((0,o.or)(t)),d((0,o.s$)(t))},children:f?"loading...":"delivered & Paid"})]})})})]})}}}]);
//# sourceMappingURL=230.625b391c.chunk.js.map